{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';// Added useCallback\n// Main App Component\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const App=()=>{// State for user authentication: stores the token and user data\nconst[auth,setAuth]=useState(null);const[page,setPage]=useState('login');// 'login', 'register', 'home', 'add-incident', 'all-incidents'\nconst[incidents,setIncidents]=useState([]);const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const API_BASE_URL='http://localhost:5000';// Function to fetch all incidents - Wrapped in useCallback for useEffect dependency\nconst fetchIncidents=useCallback(async()=>{if(!auth||!auth.token){// Ensure auth.token exists before fetching\nsetIsLoading(false);// If not authenticated, clear incidents to prevent stale data\nsetIncidents([]);return;}setIsLoading(true);setError('');try{const response=await fetch(`${API_BASE_URL}/incidents`,{method:'GET',headers:{'Authorization':`Bearer ${auth.token}`,'Content-Type':'application/json'}});if(!response.ok){throw new Error('Failed to fetch incidents.');}const data=await response.json();setIncidents(data);}catch(err){setError(err.message);}finally{setIsLoading(false);}},[auth,API_BASE_URL,setIncidents,setIsLoading,setError]);// Dependency on auth, API_BASE_URL, setIncidents, setIsLoading, setError\nuseEffect(()=>{// Fetch incidents when authenticated and on 'home' or 'all-incidents' page\n// Added fetchIncidents to the dependency array to resolve the ESLint warning\nif(auth&&(page==='all-incidents'||page==='home')){fetchIncidents();}},[auth,page,fetchIncidents]);// Function to handle logout\nconst handleLogout=async()=>{if(!auth)return;try{await fetch(`${API_BASE_URL}/logout`,{method:'POST',headers:{'Authorization':`Bearer ${auth.token}`,'Content-Type':'application/json'}});}catch(err){console.error('Logout failed:',err);}finally{// Clear all auth state regardless of whether the API call succeeded\nsetAuth(null);setPage('login');setIncidents([]);setError('');}};// Function to render the main pages based on the 'page' state\nconst renderPage=()=>{switch(page){case'register':return/*#__PURE__*/_jsx(Register,{setPage:setPage});case'home':return/*#__PURE__*/_jsx(Home,{incidents:incidents,isLoading:isLoading,error:error});case'add-incident':return/*#__PURE__*/_jsx(AddIncidentPage,{auth:auth,fetchIncidents:fetchIncidents,setPage:setPage});case'all-incidents':return/*#__PURE__*/_jsx(ViewIncidentsPage,{incidents:incidents,isLoading:isLoading,error:error,auth:auth,fetchIncidents:fetchIncidents,setIncidents:setIncidents// Pass setIncidents down to ViewIncidentsPage\n,setIsLoading:setIsLoading// Pass setIsLoading down\n,setError:setError// Pass setError down\n});case'login':default:return/*#__PURE__*/_jsx(Login,{setAuth:setAuth,setPage:setPage});}};return(/*#__PURE__*/// The main container now uses h-screen and flex-col to occupy the whole page\n_jsx(\"div\",{className:\"h-screen bg-slate-900 flex flex-col items-center justify-center font-sans\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-full bg-slate-800 text-slate-200 p-6 sm:p-10 md:p-14 rounded-none shadow-none space-y-12 border-none transition-all duration-300\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-8xl font-extrabold text-white tracking-tight leading-tight\",children:/*#__PURE__*/_jsx(\"span\",{className:\"bg-clip-text text-transparent bg-gradient-to-r from-teal-400 to-sky-500\",children:\"Ajali Report App\"})}),auth&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl text-slate-400 mt-3 font-medium\",children:[\"Welcome, \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-teal-400\",children:auth.username}),\"!\"]})]}),auth&&/*#__PURE__*/_jsxs(\"nav\",{className:\"flex justify-center space-x-4 border-b border-slate-700 pb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('home'),className:`px-6 py-2 rounded-full font-bold transition-all duration-300 ${page==='home'?'bg-sky-500 text-white shadow-lg':'text-slate-400 hover:text-white hover:bg-slate-700'}`,children:\"Home\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('add-incident'),className:`px-6 py-2 rounded-full font-bold transition-all duration-300 ${page==='add-incident'?'bg-sky-500 text-white shadow-lg':'text-slate-400 hover:text-white hover:bg-slate-700'}`,children:\"Add Incident\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('all-incidents'),className:`px-6 py-2 rounded-full font-bold transition-all duration-300 ${page==='all-incidents'?'bg-sky-500 text-white shadow-lg':'text-slate-400 hover:text-white hover:bg-slate-700'}`,children:\"All Incidents\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"px-6 py-2 rounded-full font-bold transition-all duration-300 bg-rose-500 text-white hover:bg-rose-600\",children:\"Logout\"})]}),renderPage()]})}));};// --- Updated Home Component to display all incidents ---\nconst Home=_ref=>{let{incidents,isLoading,error}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8 text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-bold text-center text-slate-100\",children:\"About Ajali Report App\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-slate-400 leading-relaxed\",children:\"Ajali is a Swahili word for \\\"accident\\\" or \\\"incident.\\\" This application is a platform designed to help users report and track various incidents by providing a title, description, location coordinates (latitude and longitude), and an optional image.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-slate-400 leading-relaxed mb-8\",children:\"With this app, you can easily log incidents and view a centralized list of all reported events. It aims to create a community-driven database for public awareness and record-keeping. Whether it's a road accident, a maintenance issue, or any other notable event, Ajali Report App makes it simple to report and share the details.\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-extrabold text-white text-center mt-10\",children:\"Recent Incidents\"}),isLoading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-slate-400\",children:\"Loading incidents...\"}):error?/*#__PURE__*/_jsxs(\"p\",{className:\"text-rose-400 text-center\",children:[\"Error: \",error]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-8 md:grid-cols-2 lg:grid-cols-3\",children:incidents.length>0?incidents.map(incident=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-700 p-6 rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-sky-500/20 transition-all duration-300 border border-slate-600\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-extrabold text-xl text-sky-400\",children:incident.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-400 mt-2\",children:incident.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-xs text-slate-500 mt-4 space-x-4\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-slate-300\",children:\"Lat:\"}),\" \",incident.lat]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-slate-300\",children:\"Long:\"}),\" \",incident.long]}),incident.created_at&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-auto text-slate-400 text-xs\",children:new Date(incident.created_at).toLocaleString()})]}),incident.image_url&&/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5000${incident.image_url}`,alt:incident.title,className:\"mt-4 w-full h-40 object-cover rounded-xl shadow-lg border border-slate-600\"})]},incident.incident_id)):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-slate-400 col-span-full\",children:\"No incidents have been reported yet.\"})})]});};// Login Component\nconst Login=_ref2=>{let{setAuth,setPage}=_ref2;const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const API_BASE_URL='http://localhost:5000';const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setError('');try{const response=await fetch(`${API_BASE_URL}/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});if(!response.ok){const errData=await response.json();throw new Error(errData.message||'Login failed.');}const data=await response.json();setAuth({token:data.token,user_id:data.user_id,username:data.username});setPage('all-incidents');}catch(err){setError(err.message);}finally{setIsLoading(false);}};return(/*#__PURE__*/// Adjusted styling for the Login component to be a contained box\n_jsx(\"div\",{className:\"flex items-center justify-center w-full h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-slate-800 text-slate-200 p-8 rounded-2xl shadow-xl space-y-8 border border-slate-700\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-bold text-center text-slate-100\",children:\"Login to Your Account\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:e=>setUsername(e.target.value),placeholder:\"Username\",required:true,className:\"w-full p-4 bg-slate-700 text-white border-2 border-slate-600 rounded-xl shadow-lg focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Password\",required:true,className:\"w-full p-4 bg-slate-700 text-white border-2 border-slate-600 rounded-xl shadow-lg focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"w-full p-4 bg-sky-600 text-white font-extrabold rounded-xl shadow-lg hover:bg-sky-700 transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed transform hover:scale-105\",children:isLoading?'Logging In...':'Login'})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-rose-400 text-center\",children:error}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-slate-400\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('register'),className:\"text-teal-400 font-bold hover:underline transition-colors duration-300\",children:\"Register here\"})]})]})}));};// Registration Component\nconst Register=_ref3=>{let{setPage}=_ref3;const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const[message,setMessage]=useState('');const API_BASE_URL='http://localhost:5000';const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setError('');setMessage('');try{const response=await fetch(`${API_BASE_URL}/register`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});const data=await response.json();if(!response.ok){throw new Error(data.message||'Registration failed.');}setMessage(data.message+' You can now log in.');setUsername('');setPassword('');}catch(err){setError(err.message);}finally{setIsLoading(false);}};return(/*#__PURE__*/// Adjusted styling for the Register component to be a contained box\n_jsx(\"div\",{className:\"flex items-center justify-center w-full h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-slate-800 text-slate-200 p-8 rounded-2xl shadow-xl space-y-8 border border-slate-700\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-bold text-center text-slate-100\",children:\"Create an Account\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:e=>setUsername(e.target.value),placeholder:\"Username\",required:true,className:\"w-full p-4 bg-slate-700 text-white border-2 border-slate-600 rounded-xl shadow-lg focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Password\",required:true,className:\"w-full p-4 bg-slate-700 text-white border-2 border-slate-600 rounded-xl shadow-lg focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"w-full p-4 bg-teal-500 text-white font-extrabold rounded-xl shadow-lg hover:bg-teal-600 transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed transform hover:scale-105\",children:isLoading?'Registering...':'Register'})]}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"text-teal-400 text-center\",children:message}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-rose-400 text-center\",children:error}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-slate-400\",children:[\"Already have an account? \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('login'),className:\"text-sky-400 font-bold hover:underline transition-colors duration-300\",children:\"Login here\"})]})]})}));};// --- New AddIncidentPage Component ---\nconst AddIncidentPage=_ref4=>{let{auth,fetchIncidents,setPage}=_ref4;const[title,setTitle]=useState('');const[description,setDescription]=useState('');const[lat,setLat]=useState('');const[long,setLong]=useState('');const[placeName,setPlaceName]=useState('');const[incidentDate,setIncidentDate]=useState('');// New state for incident date\nconst[incidentTime,setIncidentTime]=useState('');// New state for incident time\nconst[image,setImage]=useState(null);const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const API_BASE_URL='http://localhost:5000';const handleFileChange=e=>{setImage(e.target.files[0]);};const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setError('');const formData=new FormData();formData.append('title',title);formData.append('description',description);formData.append('lat',lat);formData.append('long',long);if(image){formData.append('image',image);}// Combine date and time into a single timestamp string (ISO 8601 format)\nif(incidentDate&&incidentTime){const dateTimeString=`${incidentDate}T${incidentTime}:00Z`;// Assuming UTC for simplicity\nformData.append('created_at',dateTimeString);}try{const response=await fetch(`${API_BASE_URL}/incidents`,{method:'POST',headers:{'Authorization':`Bearer ${auth.token}`},body:formData});if(!response.ok){const errData=await response.json();throw new Error(errData.message||'Failed to create incident.');}await fetchIncidents();// Refresh the list of incidents\nsetPage('all-incidents');// Navigate to the incidents page\nsetTitle('');setDescription('');setLat('');setLong('');setPlaceName('');setIncidentDate('');// Clear date input\nsetIncidentTime('');// Clear time input\nsetImage(null);}catch(err){setError(err.message);}finally{setIsLoading(false);}};const handleLocationLookup=async()=>{if(!placeName){setError('Please enter a place name to search.');return;}setIsLoading(true);setError('');// Placeholder for a real geocoding API call\n// In a real application, you would use an API like Google Maps Geocoding API\n// or OpenStreetMap Nominatim.\nconsole.log(`Searching for coordinates for: ${placeName}`);try{// Simulate an API call with a short delay\nawait new Promise(resolve=>setTimeout(resolve,1000));// Hardcoded example data\nconst locations={\"eiffel tower, paris\":{lat:\"48.8584\",long:\"2.2945\"},\"new york city\":{lat:\"40.7128\",long:\"-74.0060\"},\"tokyo, japan\":{lat:\"35.6895\",long:\"139.6917\"}};const searchResult=locations[placeName.toLowerCase()];if(searchResult){setLat(searchResult.lat);setLong(searchResult.long);}else{setError('Location not found. Please try a different place name.');}}catch(err){setError('An error occurred during location lookup.');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-700 p-8 rounded-2xl shadow-inner-lg space-y-6 border border-slate-600\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-white text-center\",children:\"Report a New Incident\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-sky-400\",children:\"Location Lookup\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:placeName,onChange:e=>setPlaceName(e.target.value),placeholder:\"Search for a place name\",className:\"w-full p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleLocationLookup,disabled:isLoading,className:\"px-6 py-4 bg-sky-500 text-white font-bold rounded-xl shadow-lg hover:bg-sky-600 transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed transform hover:scale-105\",children:isLoading?'Searching...':'Find Location'})]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,onChange:e=>setTitle(e.target.value),placeholder:\"Title\",required:true,className:\"w-full p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500 transition-all duration-300\"}),/*#__PURE__*/_jsx(\"textarea\",{value:description,onChange:e=>setDescription(e.target.value),placeholder:\"Description\",required:true,className:\"w-full p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500 transition-all duration-300\",rows:\"3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:lat,onChange:e=>setLat(e.target.value),placeholder:\"Latitude\",required:true,className:\"w-full sm:w-1/2 p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500 transition-all duration-300\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:long,onChange:e=>setLong(e.target.value),placeholder:\"Longitude\",required:true,className:\"w-full sm:w-1/2 p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500 transition-all duration-300\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-slate-400 font-semibold w-full sm:w-1/2\",children:[\"Date of Incident:\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:incidentDate,onChange:e=>setIncidentDate(e.target.value),required:true,className:\"w-full p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500 transition-all duration-300 mt-1\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"block text-slate-400 font-semibold w-full sm:w-1/2\",children:[\"Time of Incident:\",/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:incidentTime,onChange:e=>setIncidentTime(e.target.value),required:true,className:\"w-full p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500 transition-all duration-300 mt-1\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"block text-slate-400 font-semibold\",children:[\"Upload an image:\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange,accept:\"image/*\",className:\"w-full p-3 mt-1 text-white border-2 border-slate-700 rounded-xl file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-sky-500 file:text-white hover:file:bg-sky-600 transition-colors duration-300\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"w-full p-4 bg-teal-500 text-white font-extrabold rounded-xl shadow-lg hover:bg-teal-600 transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed transform hover:scale-105\",children:isLoading?'Submitting...':'Submit Incident'})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-rose-400 text-center\",children:error})]});};// --- Renamed and Refactored Incidents Component to ViewIncidentsPage ---\nconst ViewIncidentsPage=_ref5=>{let{incidents,isLoading,error,auth,fetchIncidents,setIncidents,setIsLoading,setError}=_ref5;// Added setIsLoading and setError props\nconst[editingIncident,setEditingIncident]=useState(null);// State for the incident being edited\nconst[incidentToDelete,setIncidentToDelete]=useState(null);// State for the incident to be deleted\nconst API_BASE_URL='http://localhost:5000';// Re-added API_BASE_URL for the DELETE call\n// Modified deleteIncident to perform a hard delete on the backend\nconst deleteIncident=async incident_id=>{setIsLoading(true);setError('');try{const response=await fetch(`${API_BASE_URL}/incidents/${incident_id}`,{method:'DELETE',headers:{'Authorization':`Bearer ${auth.token}`,'Content-Type':'application/json'}});if(!response.ok){const errData=await response.json();throw new Error(errData.message||'Failed to delete incident.');}// After successful deletion from backend, re-fetch all incidents to update UI\nawait fetchIncidents();setIncidentToDelete(null);// Close the confirmation modal\n}catch(err){setError(err.message);console.error('Error deleting incident:',err);}finally{setIsLoading(false);}};const ConfirmDeleteModal=_ref6=>{let{incident,onConfirm,onCancel}=_ref6;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-800 p-8 rounded-xl shadow-lg border border-slate-700 w-96 text-center space-y-6\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-semibold text-white\",children:\"Are you sure you want to delete this incident?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-md text-slate-400\",children:\"This action cannot be undone.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onConfirm(incident.incident_id),className:\"px-6 py-2 bg-rose-600 text-white font-bold rounded-lg hover:bg-rose-700 transition-all duration-300 transform hover:scale-105\",children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"px-6 py-2 bg-slate-600 text-white font-bold rounded-lg hover:bg-slate-700 transition-all duration-300 transform hover:scale-105\",children:\"Cancel\"})]})]})});};// No longer filtering by is_deleted as we are performing hard deletes\n// and the Home tab will show all incidents fetched from the backend.\nconst displayIncidents=incidents;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-10\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-extrabold text-white text-center\",children:\"All Incidents\"}),editingIncident&&/*#__PURE__*/_jsx(EditIncidentForm,{auth:auth,incident:editingIncident,fetchIncidents:fetchIncidents,setEditingIncident:setEditingIncident}),incidentToDelete&&/*#__PURE__*/_jsx(ConfirmDeleteModal,{incident:incidentToDelete,onConfirm:deleteIncident,onCancel:()=>setIncidentToDelete(null)}),isLoading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-slate-400\",children:\"Loading incidents...\"}):error?/*#__PURE__*/_jsxs(\"p\",{className:\"text-rose-400 text-center\",children:[\"Error: \",error]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IncidentMap,{incidents:displayIncidents}),\" \",/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-8 md:grid-cols-2 lg:grid-cols-3\",children:displayIncidents.length>0?displayIncidents.map(incident=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-700 p-6 rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-sky-500/20 transition-all duration-300 border border-slate-600\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-extrabold text-xl text-sky-400\",children:incident.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-400 mt-2\",children:incident.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-xs text-slate-500 mt-4 space-x-4\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-slate-300\",children:\"Lat:\"}),\" \",incident.lat]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-slate-300\",children:\"Long:\"}),\" \",incident.long]}),incident.created_at&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-auto text-slate-400 text-xs\",children:new Date(incident.created_at).toLocaleString()})]}),incident.image_url&&/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5000${incident.image_url}`,alt:incident.title,className:\"mt-4 w-full h-40 object-cover rounded-xl shadow-lg border border-slate-600\"}),auth&&/*#__PURE__*/// Ensure user is authenticated to see these buttons\n_jsxs(\"div\",{className:\"flex space-x-2 mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingIncident(incident),className:\"w-full p-2 bg-yellow-500 text-slate-900 font-bold rounded-lg shadow-md hover:bg-yellow-600 transition-colors duration-300 transform hover:scale-105\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIncidentToDelete(incident),className:\"w-full p-2 bg-rose-500 text-white font-bold rounded-lg shadow-md hover:bg-rose-600 transition-colors duration-300 transform hover:scale-105\",children:\"Delete\"})]})]},incident.incident_id)):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-slate-400 col-span-full\",children:\"No active incidents found.\"})})]})]});};// EditIncidentForm Component (remains the same)\nconst EditIncidentForm=_ref7=>{let{auth,incident,fetchIncidents,setEditingIncident}=_ref7;const[title,setTitle]=useState(incident.title);const[description,setDescription]=useState(incident.description);const[lat,setLat]=useState(incident.lat);const[long,setLong]=useState(incident.long);const[image,setImage]=useState(null);const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const API_BASE_URL='http://localhost:5000';const handleFileChange=e=>{setImage(e.target.files[0]);};const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setError('');const formData=new FormData();formData.append('title',title);formData.append('description',description);formData.append('lat',lat);formData.append('long',long);if(image){formData.append('image',image);}try{const response=await fetch(`${API_BASE_URL}/incidents/${incident.incident_id}`,{method:'PUT',headers:{'Authorization':`Bearer ${auth.token}`},body:formData});if(!response.ok){const errData=await response.json();throw new Error(errData.message||'Failed to update incident.');}await fetchIncidents();// Refresh the list of incidents\nsetEditingIncident(null);// Close the form\n}catch(err){setError(err.message);}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-700 p-8 rounded-2xl shadow-inner-lg space-y-6 border border-slate-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-white\",children:\"Edit Incident\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingIncident(null),className:\"text-rose-400 hover:text-rose-500 font-bold transition-colors duration-300\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-7 w-7\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,onChange:e=>setTitle(e.target.value),placeholder:\"Title\",required:true,className:\"w-full p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"}),/*#__PURE__*/_jsx(\"textarea\",{value:description,onChange:e=>setDescription(e.target.value),placeholder:\"Description\",required:true,className:\"w-full p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\",rows:\"3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:lat,onChange:e=>setLat(e.target.value),placeholder:\"Latitude\",required:true,className:\"w-full sm:w-1/2 p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:long,onChange:e=>setLong(e.target.value),placeholder:\"Longitude\",required:true,className:\"w-full sm:w-1/2 p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"block text-slate-400 font-semibold\",children:[\"Update image (optional):\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange,accept:\"image/*\",className:\"w-full p-3 mt-1 text-white border-2 border-slate-700 rounded-xl file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-sky-500 file:text-white hover:file:bg-sky-600 transition-colors duration-300\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"w-full p-4 bg-yellow-500 text-slate-900 font-extrabold rounded-xl shadow-lg hover:bg-yellow-600 transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed transform hover:scale-105\",children:isLoading?'Updating...':'Update Incident'})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-rose-400 text-center\",children:error})]});};// IncidentMap Component (remains the same)\nconst IncidentMap=_ref8=>{let{incidents}=_ref8;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-700 p-8 rounded-2xl shadow-xl border border-slate-600 space-y-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-3xl font-bold text-white text-center\",children:\"Incident Locations\"}),incidents.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:incidents.map(incident=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-sky-400\",children:incident.title}),/*#__PURE__*/_jsx(\"a\",{href:`https://www.google.com/maps/search/?api=1&query=${incident.lat},${incident.long}`,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-sm text-teal-400 hover:underline transition-colors duration-300\",children:\"View on Google Maps\"})]},incident.incident_id))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-slate-400\",children:\"No incident locations to display.\"})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useCallback","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","auth","setAuth","page","setPage","incidents","setIncidents","isLoading","setIsLoading","error","setError","API_BASE_URL","fetchIncidents","token","response","fetch","method","headers","ok","Error","data","json","err","message","handleLogout","console","renderPage","Register","Home","AddIncidentPage","ViewIncidentsPage","Login","className","children","username","onClick","_ref","length","map","incident","title","description","lat","long","created_at","Date","toLocaleString","image_url","src","alt","incident_id","_ref2","setUsername","password","setPassword","handleSubmit","e","preventDefault","body","JSON","stringify","errData","user_id","onSubmit","type","value","onChange","target","placeholder","required","disabled","_ref3","setMessage","_ref4","setTitle","setDescription","setLat","setLong","placeName","setPlaceName","incidentDate","setIncidentDate","incidentTime","setIncidentTime","image","setImage","handleFileChange","files","formData","FormData","append","dateTimeString","handleLocationLookup","log","Promise","resolve","setTimeout","locations","searchResult","toLowerCase","rows","accept","_ref5","editingIncident","setEditingIncident","incidentToDelete","setIncidentToDelete","deleteIncident","ConfirmDeleteModal","_ref6","onConfirm","onCancel","displayIncidents","EditIncidentForm","IncidentMap","_ref7","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","_ref8","href","rel"],"sources":["/home/boniface/Development/code/se-prep/phase-5/Ajali-Incident-App/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'; // Added useCallback\n\n// Main App Component\nconst App = () => {\n  // State for user authentication: stores the token and user data\n  const [auth, setAuth] = useState(null);\n  const [page, setPage] = useState('login'); // 'login', 'register', 'home', 'add-incident', 'all-incidents'\n  const [incidents, setIncidents] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const API_BASE_URL = 'http://localhost:5000';\n\n  // Function to fetch all incidents - Wrapped in useCallback for useEffect dependency\n  const fetchIncidents = useCallback(async () => {\n    if (!auth || !auth.token) { // Ensure auth.token exists before fetching\n      setIsLoading(false);\n      // If not authenticated, clear incidents to prevent stale data\n      setIncidents([]);\n      return;\n    }\n    setIsLoading(true);\n    setError('');\n    try {\n      const response = await fetch(`${API_BASE_URL}/incidents`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${auth.token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch incidents.');\n      }\n\n      const data = await response.json();\n      setIncidents(data);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [auth, API_BASE_URL, setIncidents, setIsLoading, setError]); // Dependency on auth, API_BASE_URL, setIncidents, setIsLoading, setError\n\n  useEffect(() => {\n    // Fetch incidents when authenticated and on 'home' or 'all-incidents' page\n    // Added fetchIncidents to the dependency array to resolve the ESLint warning\n    if (auth && (page === 'all-incidents' || page === 'home')) {\n      fetchIncidents();\n    }\n  }, [auth, page, fetchIncidents]);\n\n  // Function to handle logout\n  const handleLogout = async () => {\n    if (!auth) return;\n    try {\n      await fetch(`${API_BASE_URL}/logout`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${auth.token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n    } catch (err) {\n      console.error('Logout failed:', err);\n    } finally {\n      // Clear all auth state regardless of whether the API call succeeded\n      setAuth(null);\n      setPage('login');\n      setIncidents([]);\n      setError('');\n    }\n  };\n\n  // Function to render the main pages based on the 'page' state\n  const renderPage = () => {\n    switch (page) {\n      case 'register':\n        return <Register setPage={setPage} />;\n      case 'home':\n        return <Home incidents={incidents} isLoading={isLoading} error={error} />;\n      case 'add-incident':\n        return <AddIncidentPage auth={auth} fetchIncidents={fetchIncidents} setPage={setPage} />;\n      case 'all-incidents':\n        return <ViewIncidentsPage\n                  incidents={incidents}\n                  isLoading={isLoading}\n                  error={error}\n                  auth={auth}\n                  fetchIncidents={fetchIncidents}\n                  setIncidents={setIncidents} // Pass setIncidents down to ViewIncidentsPage\n                  setIsLoading={setIsLoading} // Pass setIsLoading down\n                  setError={setError} // Pass setError down\n               />;\n      case 'login':\n      default:\n        return <Login setAuth={setAuth} setPage={setPage} />;\n    }\n  };\n\n  return (\n    // The main container now uses h-screen and flex-col to occupy the whole page\n    <div className=\"h-screen bg-slate-900 flex flex-col items-center justify-center font-sans\">\n      {/* The inner container now has no max-width to expand to the full screen */}\n      <div className=\"w-full h-full bg-slate-800 text-slate-200 p-6 sm:p-10 md:p-14 rounded-none shadow-none space-y-12 border-none transition-all duration-300\">\n        <header className=\"text-center\">\n          {/* Increased font size and boldness for the main title */}\n          <h1 className=\"text-8xl font-extrabold text-white tracking-tight leading-tight\">\n            <span className=\"bg-clip-text text-transparent bg-gradient-to-r from-teal-400 to-sky-500\">Ajali Report App</span>\n          </h1>\n          {/* Increased font size for the welcome username */}\n          {auth && <p className=\"text-3xl text-slate-400 mt-3 font-medium\">Welcome, <span className=\"font-semibold text-teal-400\">{auth.username}</span>!</p>}\n        </header>\n        \n        {/* Navigation tabs appear only when the user is logged in */}\n        {auth && (\n          <nav className=\"flex justify-center space-x-4 border-b border-slate-700 pb-4\">\n            <button\n              onClick={() => setPage('home')}\n              className={`px-6 py-2 rounded-full font-bold transition-all duration-300 ${\n                page === 'home' ? 'bg-sky-500 text-white shadow-lg' : 'text-slate-400 hover:text-white hover:bg-slate-700'\n              }`}\n            >\n              Home\n            </button>\n            <button\n              onClick={() => setPage('add-incident')}\n              className={`px-6 py-2 rounded-full font-bold transition-all duration-300 ${\n                page === 'add-incident' ? 'bg-sky-500 text-white shadow-lg' : 'text-slate-400 hover:text-white hover:bg-slate-700'\n              }`}\n            >\n              Add Incident\n            </button>\n            <button\n              onClick={() => setPage('all-incidents')}\n              className={`px-6 py-2 rounded-full font-bold transition-all duration-300 ${\n                page === 'all-incidents' ? 'bg-sky-500 text-white shadow-lg' : 'text-slate-400 hover:text-white hover:bg-slate-700'\n              }`}\n            >\n              All Incidents\n            </button>\n            <button\n              onClick={handleLogout}\n              className=\"px-6 py-2 rounded-full font-bold transition-all duration-300 bg-rose-500 text-white hover:bg-rose-600\"\n            >\n              Logout\n            </button>\n          </nav>\n        )}\n\n        {renderPage()}\n      </div>\n    </div>\n  );\n};\n\n// --- Updated Home Component to display all incidents ---\nconst Home = ({ incidents, isLoading, error }) => {\n  return (\n    <div className=\"space-y-8 text-center\">\n      <h2 className=\"text-4xl font-bold text-center text-slate-100\">About Ajali Report App</h2>\n      <p className=\"text-lg text-slate-400 leading-relaxed\">\n        Ajali is a Swahili word for \"accident\" or \"incident.\" This application is a platform\n        designed to help users report and track various incidents by providing a title,\n        description, location coordinates (latitude and longitude), and an optional image.\n      </p>\n      <p className=\"text-lg text-slate-400 leading-relaxed mb-8\">\n        With this app, you can easily log incidents and view a centralized list of all\n        reported events. It aims to create a community-driven database for public awareness\n        and record-keeping. Whether it's a road accident, a maintenance issue, or any\n        other notable event, Ajali Report App makes it simple to report and share\n        the details.\n      </p>\n\n      <h2 className=\"text-4xl font-extrabold text-white text-center mt-10\">Recent Incidents</h2>\n      {isLoading ? (\n        <p className=\"text-center text-slate-400\">Loading incidents...</p>\n      ) : error ? (\n        <p className=\"text-rose-400 text-center\">Error: {error}</p>\n      ) : (\n        <div className=\"grid gap-8 md:grid-cols-2 lg:grid-cols-3\">\n          {incidents.length > 0 ? (\n            incidents.map((incident) => (\n              <div key={incident.incident_id} className=\"bg-slate-700 p-6 rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-sky-500/20 transition-all duration-300 border border-slate-600\">\n                <h3 className=\"font-extrabold text-xl text-sky-400\">{incident.title}</h3>\n                <p className=\"text-sm text-slate-400 mt-2\">{incident.description}</p>\n                <div className=\"flex items-center text-xs text-slate-500 mt-4 space-x-4\">\n                  <span><span className=\"font-semibold text-slate-300\">Lat:</span> {incident.lat}</span>\n                  <span><span className=\"font-semibold text-slate-300\">Long:</span> {incident.long}</span>\n                  {/* Display created_at timestamp */}\n                  {incident.created_at && (\n                    <span className=\"ml-auto text-slate-400 text-xs\">\n                      {new Date(incident.created_at).toLocaleString()}\n                    </span>\n                  )}\n                </div>\n                {incident.image_url && (\n                  <img \n                    src={`http://localhost:5000${incident.image_url}`} \n                    alt={incident.title} \n                    className=\"mt-4 w-full h-40 object-cover rounded-xl shadow-lg border border-slate-600\"\n                  />\n                )}\n              </div>\n            ))\n          ) : (\n            <p className=\"text-center text-slate-400 col-span-full\">No incidents have been reported yet.</p>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Login Component\nconst Login = ({ setAuth, setPage }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const API_BASE_URL = 'http://localhost:5000';\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n    try {\n      const response = await fetch(`${API_BASE_URL}/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ username, password }),\n      });\n\n      if (!response.ok) {\n        const errData = await response.json();\n        throw new Error(errData.message || 'Login failed.');\n      }\n\n      const data = await response.json();\n      setAuth({ token: data.token, user_id: data.user_id, username: data.username });\n      setPage('all-incidents');\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    // Adjusted styling for the Login component to be a contained box\n    <div className=\"flex items-center justify-center w-full h-full\">\n      <div className=\"w-full max-w-md bg-slate-800 text-slate-200 p-8 rounded-2xl shadow-xl space-y-8 border border-slate-700\">\n        <h2 className=\"text-4xl font-bold text-center text-slate-100\">Login to Your Account</h2>\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <input\n            type=\"text\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            placeholder=\"Username\"\n            required\n            className=\"w-full p-4 bg-slate-700 text-white border-2 border-slate-600 rounded-xl shadow-lg focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"\n          />\n          <input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            placeholder=\"Password\"\n            required\n            className=\"w-full p-4 bg-slate-700 text-white border-2 border-slate-600 rounded-xl shadow-lg focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"\n          />\n          <button\n            type=\"submit\"\n            disabled={isLoading}\n            className=\"w-full p-4 bg-sky-600 text-white font-extrabold rounded-xl shadow-lg hover:bg-sky-700 transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed transform hover:scale-105\"\n          >\n            {isLoading ? 'Logging In...' : 'Login'}\n          </button>\n        </form>\n        {error && <p className=\"text-rose-400 text-center\">{error}</p>}\n        <p className=\"text-center text-slate-400\">\n          Don't have an account? <button onClick={() => setPage('register')} className=\"text-teal-400 font-bold hover:underline transition-colors duration-300\">Register here</button>\n        </p>\n      </div>\n    </div>\n  );\n};\n\n// Registration Component\nconst Register = ({ setPage }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [message, setMessage] = useState('');\n  const API_BASE_URL = 'http://localhost:5000';\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n    setMessage('');\n    try {\n      const response = await fetch(`${API_BASE_URL}/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ username, password }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Registration failed.');\n      }\n      \n      setMessage(data.message + ' You can now log in.');\n      setUsername('');\n      setPassword('');\n\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    // Adjusted styling for the Register component to be a contained box\n    <div className=\"flex items-center justify-center w-full h-full\">\n      <div className=\"w-full max-w-md bg-slate-800 text-slate-200 p-8 rounded-2xl shadow-xl space-y-8 border border-slate-700\">\n        <h2 className=\"text-4xl font-bold text-center text-slate-100\">Create an Account</h2>\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <input\n            type=\"text\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            placeholder=\"Username\"\n            required\n            className=\"w-full p-4 bg-slate-700 text-white border-2 border-slate-600 rounded-xl shadow-lg focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"\n          />\n          <input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            placeholder=\"Password\"\n            required\n            className=\"w-full p-4 bg-slate-700 text-white border-2 border-slate-600 rounded-xl shadow-lg focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"\n          />\n          <button\n            type=\"submit\"\n            disabled={isLoading}\n            className=\"w-full p-4 bg-teal-500 text-white font-extrabold rounded-xl shadow-lg hover:bg-teal-600 transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed transform hover:scale-105\"\n          >\n            {isLoading ? 'Registering...' : 'Register'}\n          </button>\n        </form>\n        {message && <p className=\"text-teal-400 text-center\">{message}</p>}\n        {error && <p className=\"text-rose-400 text-center\">{error}</p>}\n        <p className=\"text-center text-slate-400\">\n          Already have an account? <button onClick={() => setPage('login')} className=\"text-sky-400 font-bold hover:underline transition-colors duration-300\">Login here</button>\n        </p>\n      </div>\n    </div>\n  );\n};\n\n// --- New AddIncidentPage Component ---\nconst AddIncidentPage = ({ auth, fetchIncidents, setPage }) => {\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [lat, setLat] = useState('');\n  const [long, setLong] = useState('');\n  const [placeName, setPlaceName] = useState('');\n  const [incidentDate, setIncidentDate] = useState(''); // New state for incident date\n  const [incidentTime, setIncidentTime] = useState(''); // New state for incident time\n  const [image, setImage] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const API_BASE_URL = 'http://localhost:5000';\n\n  const handleFileChange = (e) => {\n    setImage(e.target.files[0]);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n\n    const formData = new FormData();\n    formData.append('title', title);\n    formData.append('description', description);\n    formData.append('lat', lat);\n    formData.append('long', long);\n    if (image) {\n      formData.append('image', image);\n    }\n\n    // Combine date and time into a single timestamp string (ISO 8601 format)\n    if (incidentDate && incidentTime) {\n      const dateTimeString = `${incidentDate}T${incidentTime}:00Z`; // Assuming UTC for simplicity\n      formData.append('created_at', dateTimeString);\n    }\n    \n    try {\n      const response = await fetch(`${API_BASE_URL}/incidents`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${auth.token}`,\n        },\n        body: formData,\n      });\n\n      if (!response.ok) {\n        const errData = await response.json();\n        throw new Error(errData.message || 'Failed to create incident.');\n      }\n\n      await fetchIncidents(); // Refresh the list of incidents\n      setPage('all-incidents'); // Navigate to the incidents page\n      setTitle('');\n      setDescription('');\n      setLat('');\n      setLong('');\n      setPlaceName('');\n      setIncidentDate(''); // Clear date input\n      setIncidentTime(''); // Clear time input\n      setImage(null);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleLocationLookup = async () => {\n    if (!placeName) {\n      setError('Please enter a place name to search.');\n      return;\n    }\n    setIsLoading(true);\n    setError('');\n    // Placeholder for a real geocoding API call\n    // In a real application, you would use an API like Google Maps Geocoding API\n    // or OpenStreetMap Nominatim.\n    console.log(`Searching for coordinates for: ${placeName}`);\n    try {\n        // Simulate an API call with a short delay\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        // Hardcoded example data\n        const locations = {\n            \"eiffel tower, paris\": { lat: \"48.8584\", long: \"2.2945\" },\n            \"new york city\": { lat: \"40.7128\", long: \"-74.0060\" },\n            \"tokyo, japan\": { lat: \"35.6895\", long: \"139.6917\" }\n        };\n        const searchResult = locations[placeName.toLowerCase()];\n        if (searchResult) {\n            setLat(searchResult.lat);\n            setLong(searchResult.long);\n        } else {\n            setError('Location not found. Please try a different place name.');\n        }\n    } catch (err) {\n        setError('An error occurred during location lookup.');\n    } finally {\n        setIsLoading(false);\n    }\n};\n\n  return (\n    <div className=\"bg-slate-700 p-8 rounded-2xl shadow-inner-lg space-y-6 border border-slate-600\">\n      <h3 className=\"text-2xl font-bold text-white text-center\">Report a New Incident</h3>\n      <div className=\"space-y-4\">\n        <h4 className=\"text-xl font-bold text-sky-400\">Location Lookup</h4>\n        <div className=\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\">\n          <input\n            type=\"text\"\n            value={placeName}\n            onChange={(e) => setPlaceName(e.target.value)}\n            placeholder=\"Search for a place name\"\n            className=\"w-full p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"\n          />\n          <button\n            type=\"button\"\n            onClick={handleLocationLookup}\n            disabled={isLoading}\n            className=\"px-6 py-4 bg-sky-500 text-white font-bold rounded-xl shadow-lg hover:bg-sky-600 transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed transform hover:scale-105\"\n          >\n            {isLoading ? 'Searching...' : 'Find Location'}\n          </button>\n        </div>\n      </div>\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <input\n          type=\"text\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n          placeholder=\"Title\"\n          required\n          className=\"w-full p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500 transition-all duration-300\"\n        />\n        <textarea\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n          placeholder=\"Description\"\n          required\n          className=\"w-full p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500 transition-all duration-300\"\n          rows=\"3\"\n        />\n        <div className=\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\">\n          <input\n            type=\"text\"\n            value={lat}\n            onChange={(e) => setLat(e.target.value)}\n            placeholder=\"Latitude\"\n            required\n            className=\"w-full sm:w-1/2 p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500 transition-all duration-300\"\n          />\n          <input\n            type=\"text\"\n            value={long}\n            onChange={(e) => setLong(e.target.value)}\n            placeholder=\"Longitude\"\n            required\n            className=\"w-full sm:w-1/2 p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500 transition-all duration-300\"\n          />\n        </div>\n        {/* New Date and Time inputs */}\n        <div className=\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\">\n          <label className=\"block text-slate-400 font-semibold w-full sm:w-1/2\">\n            Date of Incident:\n            <input\n              type=\"date\"\n              value={incidentDate}\n              onChange={(e) => setIncidentDate(e.target.value)}\n              required\n              className=\"w-full p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500 transition-all duration-300 mt-1\"\n            />\n          </label>\n          <label className=\"block text-slate-400 font-semibold w-full sm:w-1/2\">\n            Time of Incident:\n            <input\n              type=\"time\"\n              value={incidentTime}\n              onChange={(e) => setIncidentTime(e.target.value)}\n              required\n              className=\"w-full p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500 transition-all duration-300 mt-1\"\n            />\n          </label>\n        </div>\n        <label className=\"block text-slate-400 font-semibold\">\n          Upload an image:\n          <input\n            type=\"file\"\n            onChange={handleFileChange}\n            accept=\"image/*\"\n            className=\"w-full p-3 mt-1 text-white border-2 border-slate-700 rounded-xl file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-sky-500 file:text-white hover:file:bg-sky-600 transition-colors duration-300\"\n          />\n        </label>\n        <button\n          type=\"submit\"\n          disabled={isLoading}\n          className=\"w-full p-4 bg-teal-500 text-white font-extrabold rounded-xl shadow-lg hover:bg-teal-600 transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed transform hover:scale-105\"\n        >\n          {isLoading ? 'Submitting...' : 'Submit Incident'}\n        </button>\n      </form>\n      {error && <p className=\"text-rose-400 text-center\">{error}</p>}\n    </div>\n  );\n};\n\n// --- Renamed and Refactored Incidents Component to ViewIncidentsPage ---\nconst ViewIncidentsPage = ({ incidents, isLoading, error, auth, fetchIncidents, setIncidents, setIsLoading, setError }) => { // Added setIsLoading and setError props\n  const [editingIncident, setEditingIncident] = useState(null); // State for the incident being edited\n  const [incidentToDelete, setIncidentToDelete] = useState(null); // State for the incident to be deleted\n  const API_BASE_URL = 'http://localhost:5000'; // Re-added API_BASE_URL for the DELETE call\n\n  // Modified deleteIncident to perform a hard delete on the backend\n  const deleteIncident = async (incident_id) => {\n    setIsLoading(true);\n    setError('');\n    try {\n      const response = await fetch(`${API_BASE_URL}/incidents/${incident_id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${auth.token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        const errData = await response.json();\n        throw new Error(errData.message || 'Failed to delete incident.');\n      }\n      \n      // After successful deletion from backend, re-fetch all incidents to update UI\n      await fetchIncidents(); \n      setIncidentToDelete(null); // Close the confirmation modal\n    } catch (err) {\n      setError(err.message);\n      console.error('Error deleting incident:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const ConfirmDeleteModal = ({ incident, onConfirm, onCancel }) => {\n    return (\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75\">\n        <div className=\"bg-slate-800 p-8 rounded-xl shadow-lg border border-slate-700 w-96 text-center space-y-6\">\n          <p className=\"text-xl font-semibold text-white\">Are you sure you want to delete this incident?</p>\n          <p className=\"text-md text-slate-400\">This action cannot be undone.</p>\n          <div className=\"flex justify-center space-x-4\">\n            <button\n              onClick={() => onConfirm(incident.incident_id)}\n              className=\"px-6 py-2 bg-rose-600 text-white font-bold rounded-lg hover:bg-rose-700 transition-all duration-300 transform hover:scale-105\"\n            >\n              Delete\n            </button>\n            <button\n              onClick={onCancel}\n              className=\"px-6 py-2 bg-slate-600 text-white font-bold rounded-lg hover:bg-slate-700 transition-all duration-300 transform hover:scale-105\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  // No longer filtering by is_deleted as we are performing hard deletes\n  // and the Home tab will show all incidents fetched from the backend.\n  const displayIncidents = incidents; \n\n  return (\n    <div className=\"space-y-10\">\n      <h2 className=\"text-4xl font-extrabold text-white text-center\">All Incidents</h2>\n      \n      {editingIncident && <EditIncidentForm auth={auth} incident={editingIncident} fetchIncidents={fetchIncidents} setEditingIncident={setEditingIncident} />}\n      {incidentToDelete && <ConfirmDeleteModal incident={incidentToDelete} onConfirm={deleteIncident} onCancel={() => setIncidentToDelete(null)} />}\n\n      {isLoading ? (\n        <p className=\"text-center text-slate-400\">Loading incidents...</p>\n      ) : error ? (\n        <p className=\"text-rose-400 text-center\">Error: {error}</p>\n      ) : (\n        <>\n          <IncidentMap incidents={displayIncidents} /> {/* Pass all incidents to map */}\n          <div className=\"grid gap-8 md:grid-cols-2 lg:grid-cols-3\">\n            {displayIncidents.length > 0 ? (\n              displayIncidents.map((incident) => (\n                <div key={incident.incident_id} className=\"bg-slate-700 p-6 rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-sky-500/20 transition-all duration-300 border border-slate-600\">\n                  <h3 className=\"font-extrabold text-xl text-sky-400\">{incident.title}</h3>\n                  <p className=\"text-sm text-slate-400 mt-2\">{incident.description}</p>\n                  <div className=\"flex items-center text-xs text-slate-500 mt-4 space-x-4\">\n                    <span><span className=\"font-semibold text-slate-300\">Lat:</span> {incident.lat}</span>\n                    <span><span className=\"font-semibold text-slate-300\">Long:</span> {incident.long}</span>\n                    {/* Display created_at timestamp */}\n                    {incident.created_at && (\n                      <span className=\"ml-auto text-slate-400 text-xs\">\n                        {new Date(incident.created_at).toLocaleString()}\n                      </span>\n                    )}\n                  </div>\n                  {incident.image_url && (\n                    <img \n                      src={`http://localhost:5000${incident.image_url}`} \n                      alt={incident.title} \n                      className=\"mt-4 w-full h-40 object-cover rounded-xl shadow-lg border border-slate-600\"\n                    />\n                  )}\n                  {/* Buttons for editing and deleting - now always visible if authenticated */}\n                  {auth && ( // Ensure user is authenticated to see these buttons\n                      <div className=\"flex space-x-2 mt-4\">\n                        <button \n                            onClick={() => setEditingIncident(incident)}\n                            className=\"w-full p-2 bg-yellow-500 text-slate-900 font-bold rounded-lg shadow-md hover:bg-yellow-600 transition-colors duration-300 transform hover:scale-105\"\n                        >\n                            Edit\n                        </button>\n                        <button \n                            onClick={() => setIncidentToDelete(incident)}\n                            className=\"w-full p-2 bg-rose-500 text-white font-bold rounded-lg shadow-md hover:bg-rose-600 transition-colors duration-300 transform hover:scale-105\"\n                        >\n                            Delete\n                        </button>\n                      </div>\n                  )}\n                </div>\n              ))\n            ) : (\n              <p className=\"text-center text-slate-400 col-span-full\">No active incidents found.</p>\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\n// EditIncidentForm Component (remains the same)\nconst EditIncidentForm = ({ auth, incident, fetchIncidents, setEditingIncident }) => {\n  const [title, setTitle] = useState(incident.title);\n  const [description, setDescription] = useState(incident.description);\n  const [lat, setLat] = useState(incident.lat);\n  const [long, setLong] = useState(incident.long);\n  const [image, setImage] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const API_BASE_URL = 'http://localhost:5000';\n\n  const handleFileChange = (e) => {\n    setImage(e.target.files[0]);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n\n    const formData = new FormData();\n    formData.append('title', title);\n    formData.append('description', description);\n    formData.append('lat', lat);\n    formData.append('long', long);\n    if (image) {\n      formData.append('image', image);\n    }\n    \n    try {\n      const response = await fetch(`${API_BASE_URL}/incidents/${incident.incident_id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${auth.token}`,\n        },\n        body: formData,\n      });\n\n      if (!response.ok) {\n        const errData = await response.json();\n        throw new Error(errData.message || 'Failed to update incident.');\n      }\n\n      await fetchIncidents(); // Refresh the list of incidents\n      setEditingIncident(null); // Close the form\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-slate-700 p-8 rounded-2xl shadow-inner-lg space-y-6 border border-slate-600\">\n      <div className=\"flex justify-between items-center mb-4\">\n        <h3 className=\"text-2xl font-bold text-white\">Edit Incident</h3>\n        <button onClick={() => setEditingIncident(null)} className=\"text-rose-400 hover:text-rose-500 font-bold transition-colors duration-300\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-7 w-7\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n      </div>\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <input\n          type=\"text\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n          placeholder=\"Title\"\n          required\n          className=\"w-full p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"\n        />\n        <textarea\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n          placeholder=\"Description\"\n          required\n          className=\"w-full p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"\n          rows=\"3\"\n        />\n        <div className=\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\">\n          <input\n            type=\"text\"\n            value={lat}\n            onChange={(e) => setLat(e.target.value)}\n            placeholder=\"Latitude\"\n            required\n            className=\"w-full sm:w-1/2 p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"\n          />\n          <input\n            type=\"text\"\n            value={long}\n            onChange={(e) => setLong(e.target.value)}\n            placeholder=\"Longitude\"\n            required\n            className=\"w-full sm:w-1/2 p-4 bg-slate-800 text-white border-2 border-slate-700 rounded-xl shadow-md focus:outline-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 transition-all duration-300\"\n          />\n        </div>\n        <label className=\"block text-slate-400 font-semibold\">\n          Update image (optional):\n          <input\n            type=\"file\"\n            onChange={handleFileChange}\n            accept=\"image/*\"\n            className=\"w-full p-3 mt-1 text-white border-2 border-slate-700 rounded-xl file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-sky-500 file:text-white hover:file:bg-sky-600 transition-colors duration-300\"\n          />\n        </label>\n        <button\n          type=\"submit\"\n          disabled={isLoading}\n          className=\"w-full p-4 bg-yellow-500 text-slate-900 font-extrabold rounded-xl shadow-lg hover:bg-yellow-600 transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed transform hover:scale-105\"\n        >\n          {isLoading ? 'Updating...' : 'Update Incident'}\n        </button>\n      </form>\n      {error && <p className=\"text-rose-400 text-center\">{error}</p>}\n    </div>\n  );\n};\n\n// IncidentMap Component (remains the same)\nconst IncidentMap = ({ incidents }) => {\n  return (\n    <div className=\"bg-slate-700 p-8 rounded-2xl shadow-xl border border-slate-600 space-y-6\">\n      <h3 className=\"text-3xl font-bold text-white text-center\">Incident Locations</h3>\n      {incidents.length > 0 ? (\n        <div className=\"space-y-4\">\n          {incidents.map((incident) => (\n            <div key={incident.incident_id} className=\"p-4 bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300\">\n              <p className=\"text-lg font-semibold text-sky-400\">{incident.title}</p>\n              <a \n                href={`https://www.google.com/maps/search/?api=1&query=${incident.lat},${incident.long}`} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\" \n                className=\"text-sm text-teal-400 hover:underline transition-colors duration-300\"\n              >\n                View on Google Maps\n              </a>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <p className=\"text-center text-slate-400\">No incident locations to display.</p>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}